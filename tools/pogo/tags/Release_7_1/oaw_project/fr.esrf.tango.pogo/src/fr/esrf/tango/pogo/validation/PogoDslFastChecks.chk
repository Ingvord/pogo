import pogoDsl;

extension org::eclipse::xtend::util::stdlib::io;
extension fr::esrf::tango::pogo::Extensions;
/*
 * This check file is used by the parser
 * and by the editor. Add your constraints here!
 */
 
//context PogoDeviceClass ERROR "base classes must be abstract":
//	baseClass.isAbstract; 

context PogoDeviceClass ERROR "no class description specified: "+loc():
	description != null;

	
//context Command ERROR "Command name not unique":
//	((PogoDeviceClass)eContainer).allCommands().select(c|c.name == name).size == 1;
		
context Command ERROR "command names must start with a capital letter: "+loc():
	name.toFirstUpper() == name;

context Property ERROR "property names must start with a capital letter: "+loc():
	name.toFirstUpper() == name;

context Command ERROR "no output type specified: "+loc():
	argout != null;

context Command ERROR "no input type specified: "+loc():
	argin != null;

context Argument ERROR "no argument type specified: "+loc():
	type != null;

context Argument ERROR "no argument description specified: "+loc():
	description != null;

context Property ERROR "no type specified: "+loc():
	type != null;
	
context Property ERROR "no name specified: "+loc():
	name != null;
	
context Command ERROR "no argin specified: "+loc():
	argin != null;
	
context Command ERROR "no argout specified: "+loc():
	argout != null;
	
context Property ERROR "duplicate name: "+loc():
	siblings().select(e|e.name == this.name).size == 1;
	

